<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- Bill of Materials Form View -->
    <record id="view_mrp_bom_form_inherit" model="ir.ui.view">
        <field name="name">mrp.bom.form.inherit</field>
        <field name="model">mrp.bom</field>
        <field name="inherit_id" ref="mrp.mrp_bom_form_view"/>
        <field name="arch" type="xml">
            
            <!-- Add stat buttons -->
            <xpath expr="//div[@name='button_box']" position="inside">
                <button name="action_view_quality_points" type="object" 
                        class="oe_stat_button" icon="fa-check-circle">
                    <field name="quality_point_count" widget="statinfo" string="Quality Points"/>
                </button>
                <button name="action_approve" type="object" string="Approve" 
                        class="oe_stat_button" icon="fa-thumbs-up"
                        invisible="approved"/>
                <button name="action_revise" type="object" string="New Revision" 
                        class="oe_stat_button" icon="fa-refresh"/>
            </xpath>
            
            <!-- Add fields after code -->
            <xpath expr="//field[@name='code']" position="after">
                <field name="bom_category"/>
                <field name="revision"/>
                <field name="revision_date"/>
            </xpath>
            
            <!-- Add approval info -->
            <xpath expr="//field[@name='product_tmpl_id']" position="after">
                <field name="approved" invisible="1"/>
                <field name="approved_by" readonly="1" invisible="not approved"/>
                <field name="approval_date" readonly="1" invisible="not approved"/>
            </xpath>
            
            <!-- Add costing page -->
            <xpath expr="//notebook" position="inside">
                <page string="Costing &amp; Planning" name="costing" invisible="1">
                    <group>
                        <group>
                            <field name="material_cost"/>
                            <field name="estimated_cost"/>
                            <field name="scrap_percentage"/>
                        </group>
                        <group>
                            <field name="lead_time"/>
                        </group>
                    </group>
                    <field name="notes" placeholder="Technical notes and specifications..."/>
                </page>
            </xpath>
            
            <!-- Enhance bom line -->
            <xpath expr="//field[@name='bom_line_ids']/list/field[@name='product_id']" position="after">
                <field name="is_critical" optional="show"/>
                <field name="lead_time" optional="hide"/>
            </xpath>
            
        </field>
    </record>
    
    <!-- Bill of Materials Tree View -->
    <record id="view_mrp_bom_tree_inherit" model="ir.ui.view">
        <field name="name">mrp.bom.tree.inherit</field>
        <field name="model">mrp.bom</field>
        <field name="inherit_id" ref="mrp.mrp_bom_tree_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='code']" position="after">
                <field name="bom_category"/>
                <field name="revision"/>
                <field name="approved"/>
            </xpath>
        </field>
    </record>
    
</odoo>
